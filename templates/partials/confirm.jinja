{# 
  Confirmation dialog component for dangerous actions
  
  Parameters:
  - id: unique dialog identifier (required)
  - title: dialog title (default: "Confirm Action")
  - message: confirmation message (required)
  - confirm_text: confirm button text (default: "Confirm")
  - cancel_text: cancel button text (default: "Cancel")
  - confirm_class: button class - 'danger', 'warning', 'primary' (default: 'danger')
  - action_url: URL for confirmation action (for HTMX)
  - method: HTTP method (default: 'post')
  
  Usage:
  {% include 'partials/confirm.jinja' with {
    'id': 'confirm-delete',
    'title': 'Delete Item',
    'message': 'Are you sure you want to delete this item?',
    'action_url': '/delete/123'
  } %}
#}

<div 
  id="{{ id }}"
  class="modal-overlay"
  x-data="{ open: false }"
  x-show="open"
  x-on:keydown.escape.window="open = false"
  style="display: none;"
  x-transition:enter="transition ease-out duration-200"
  x-transition:enter-start="opacity-0"
  x-transition:enter-end="opacity-100"
  x-transition:leave="transition ease-in duration-150"
  x-transition:leave-start="opacity-100"
  x-transition:leave-end="opacity-0"
>
  {# Backdrop #}
  <div class="fixed inset-0 bg-black/80 backdrop-blur-sm"></div>

  {# Dialog Container #}
  <div class="fixed inset-0 z-50 overflow-y-auto">
    <div class="flex min-h-full items-center justify-center p-4">
      {# Dialog Content #}
      <div 
        class="modal modal-sm"
        x-transition:enter="transition ease-out duration-200"
        x-transition:enter-start="opacity-0 translate-y-4 scale-95"
        x-transition:enter-end="opacity-100 translate-y-0 scale-100"
        x-transition:leave="transition ease-in duration-150"
        x-transition:leave-start="opacity-100 translate-y-0 scale-100"
        x-transition:leave-end="opacity-0 translate-y-4 scale-95"
      >
        {# Warning Icon #}
        <div class="flex items-center justify-center w-12 h-12 mx-auto mb-4 rounded-full bg-{{ confirm_class|default('danger') }}-900/50 border-2 border-{{ confirm_class|default('danger') }}-500">
          <svg class="w-6 h-6 text-{{ confirm_class|default('danger') }}-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
          </svg>
        </div>

        {# Title #}
        <h3 class="text-xl font-semibold text-text-primary text-center mb-2">
          {{ title|default('Confirm Action') }}
        </h3>

        {# Message #}
        <div class="text-text-secondary text-center mb-6">
          {{ message|safe }}
        </div>

        {# Actions #}
        <div class="flex space-x-3">
          {# Cancel Button #}
          <button
            type="button"
            class="btn-secondary flex-1"
            x-on:click="open = false"
          >
            {{ cancel_text|default('Cancel') }}
          </button>

          {# Confirm Button #}
          {% if action_url %}
            <button
              type="button"
              class="btn-{{ confirm_class|default('danger') }} flex-1 inline-flex items-center justify-center gap-2 htmx-loading"
              hx-{{ method|default('post') }}="{{ action_url }}"
              hx-confirm="false"
              x-on:click="open = false"
            >
              <span class="htmx-indicator">
                <div class="loading-spinner loading-spinner-sm"></div>
              </span>
              <span>{{ confirm_text|default('Confirm') }}</span>
            </button>
          {% else %}
            <button
              type="button"
              class="btn-{{ confirm_class|default('danger') }} flex-1"
              x-on:click="open = false"
              onclick="{{ confirm_action }}"
            >
              {{ confirm_text|default('Confirm') }}
            </button>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>

{# JavaScript Helper Function #}
<script>
  // Function to show confirmation dialog
  function showConfirm(dialogId) {
    const dialog = document.getElementById(dialogId);
    if (dialog && dialog.__x) {
      dialog.__x.$data.open = true;
    }
  }
</script>

{# Note: This component requires Alpine.js #}
{# Add to base template: <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script> #}
