{# 
  Status modal component for showing ongoing operations
  
  Parameters:
  - id: unique dialog identifier (required)
  - title: dialog title (required)
  - message: status message (required)
  - color: color class - 'warning', 'info', 'primary' (default: 'warning')
  
  Usage:
  {% include 'partials/status_modal.jinja' with {
    'id': 'status-checking',
    'title': 'Checking',
    'message': 'Please wait while we check for in-use devices...',
    'color': 'warning'
  } %}
#}

<div 
  id="{{ id }}"
  class="modal-overlay"
  x-data="{ open: false }"
  x-show="open"
  style="display: none;"
  x-transition:enter="transition ease-out duration-200"
  x-transition:enter-start="opacity-0"
  x-transition:enter-end="opacity-100"
  x-transition:leave="transition ease-in duration-150"
  x-transition:leave-start="opacity-100"
  x-transition:leave-end="opacity-0"
>
  {# Backdrop #}
  <div class="fixed inset-0 bg-black/80 backdrop-blur-sm"></div>

  {# Dialog Container #}
  <div class="fixed inset-0 z-50 overflow-y-auto">
    <div class="flex min-h-full items-center justify-center p-4">
      {# Dialog Content #}
      <div 
        class="modal modal-sm"
        x-transition:enter="transition ease-out duration-200"
        x-transition:enter-start="opacity-0 translate-y-4 scale-95"
        x-transition:enter-end="opacity-100 translate-y-0 scale-100"
        x-transition:leave="transition ease-in duration-150"
        x-transition:leave-start="opacity-100 translate-y-0 scale-100"
        x-transition:leave-end="opacity-0 translate-y-4 scale-95"
      >
        {# Status Icon #}
        <div class="flex items-center justify-center w-12 h-12 mx-auto mb-4 rounded-full bg-{{ color|default('warning') }}-900/50 border-2 border-{{ color|default('warning') }}-500">
          <svg class="w-6 h-6 text-{{ color|default('warning') }}-400 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
          </svg>
        </div>

        {# Title #}
        <h3 class="text-xl font-semibold text-text-primary text-center mb-2">
          {{ title }}
        </h3>

        {# Message #}
        <p class="text-text-secondary text-center mb-6">
          {{ message }}
        </p>

        {# Optional spinner #}
        <div class="flex justify-center">
          <div class="loading-spinner"></div>
        </div>
      </div>
    </div>
  </div>
</div>

{# JavaScript Helper Functions #}
<script>
  // Function to show status modal
  function showStatus(dialogId) {
    const dialog = document.getElementById(dialogId);
    if (dialog && dialog.__x) {
      dialog.__x.$data.open = true;
    }
  }

  // Function to hide status modal
  function hideStatus(dialogId) {
    const dialog = document.getElementById(dialogId);
    if (dialog && dialog.__x) {
      dialog.__x.$data.open = false;
    }
  }
</script>

{# Note: This component requires Alpine.js #}
