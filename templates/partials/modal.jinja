{# 
  Modal dialog component
  
  Parameters:
  - id: unique modal identifier (required)
  - title: modal title (required)
  - size: modal size - 'sm', 'md', 'lg', 'xl', '2xl' (default: 'md')
  - closeable: whether modal can be closed (default: true)
  
  Usage:
  Include this in your template and use slot for content:
  {% include 'partials/modal.jinja' with {'id': 'myModal', 'title': 'Modal Title'} %}
  Or trigger with HTMX using hx-target="#modal-container"
#}

<div 
  id="{{ id }}"
  class="modal-overlay"
  x-data="{ open: false }"
  x-show="open"
  x-on:keydown.escape.window="open = false"
  style="display: none;"
  x-transition:enter="transition ease-out duration-200"
  x-transition:enter-start="opacity-0"
  x-transition:enter-end="opacity-100"
  x-transition:leave="transition ease-in duration-150"
  x-transition:leave-start="opacity-100"
  x-transition:leave-end="opacity-0"
>
  {# Backdrop #}
  <div 
    class="fixed inset-0 bg-black/80 backdrop-blur-sm"
    {% if closeable|default(true) %}
      x-on:click="open = false"
    {% endif %}
  ></div>

  {# Modal Container #}
  <div class="fixed inset-0 z-50 overflow-y-auto">
    <div class="flex min-h-full items-center justify-center p-4">
      {# Modal Content #}
      <div 
        class="modal modal-{{ size|default('md') }}"
        x-on:click.away="{% if closeable|default(true) %}open = false{% endif %}"
        x-transition:enter="transition ease-out duration-200"
        x-transition:enter-start="opacity-0 translate-y-4 scale-95"
        x-transition:enter-end="opacity-100 translate-y-0 scale-100"
        x-transition:leave="transition ease-in duration-150"
        x-transition:leave-start="opacity-100 translate-y-0 scale-100"
        x-transition:leave-end="opacity-0 translate-y-4 scale-95"
      >
        {# Header #}
        <div class="modal-header">
          <h3 class="text-xl font-semibold text-text-primary">
            {{ title }}
          </h3>
          {% if closeable|default(true) %}
            <button
              type="button"
              class="text-text-secondary hover:text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-500 rounded-lg p-1.5 transition-colors"
              x-on:click="open = false"
              aria-label="Close"
            >
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
              </svg>
            </button>
          {% endif %}
        </div>

        {# Body - Content will be inserted here #}
        <div class="modal-body">
          {{ caller() if caller }}
        </div>

        {# Footer - Optional, can be added in caller #}
      </div>
    </div>
  </div>
</div>

{# JavaScript Helper Function #}
<script>
  // Function to open modal programmatically
  function openModal(modalId) {
    const modal = document.getElementById(modalId);
    if (modal && modal.__x) {
      modal.__x.$data.open = true;
    }
  }

  // Function to close modal programmatically
  function closeModal(modalId) {
    const modal = document.getElementById(modalId);
    if (modal && modal.__x) {
      modal.__x.$data.open = false;
    }
  }
</script>

{# Note: This component requires Alpine.js #}
{# Add to base template: <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script> #}
